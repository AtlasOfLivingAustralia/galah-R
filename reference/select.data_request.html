<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Keep or drop columns using their names — select.data_request • galah</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Keep or drop columns using their names — select.data_request"><meta name="description" content="Select (and optionally rename) variables in a data frame, using
a concise mini-language that makes it easy to refer to variables based on
their name. Note that unlike calling select() on a local tibble, this
implementation is only evaluated at the
collapse() stage, meaning any errors
or messages will be triggered at the end of the pipe.
select() supports dplyr selection helpers, including:
everything: Matches all variables.
last_col: Select last variable, possibly with an
offset.


Other helpers select variables by matching patterns in their names:
starts_with: Starts with a prefix.
ends_with: Ends with a suffix.
contains: Contains a literal string.
matches: Matches a regular expression.
num_range: Matches a numerical range like x01,
x02, x03.


Or from variables stored in a character vector:
all_of: Matches variable names in a character
vector. All names must be present, otherwise an out-of-bounds error is
thrown.
any_of: Same as all_of(), except that no error
is thrown for names that don't exist.


Or using a predicate function:
where: Applies a function to all variables and selects those for which the function returns TRUE.

"><meta property="og:description" content="Select (and optionally rename) variables in a data frame, using
a concise mini-language that makes it easy to refer to variables based on
their name. Note that unlike calling select() on a local tibble, this
implementation is only evaluated at the
collapse() stage, meaning any errors
or messages will be triggered at the end of the pipe.
select() supports dplyr selection helpers, including:
everything: Matches all variables.
last_col: Select last variable, possibly with an
offset.


Other helpers select variables by matching patterns in their names:
starts_with: Starts with a prefix.
ends_with: Ends with a suffix.
contains: Contains a literal string.
matches: Matches a regular expression.
num_range: Matches a numerical range like x01,
x02, x03.


Or from variables stored in a character vector:
all_of: Matches variable names in a character
vector. All names must be present, otherwise an out-of-bounds error is
thrown.
any_of: Same as all_of(), except that no error
is thrown for names that don't exist.


Or using a predicate function:
where: Applies a function to all variables and selects those for which the function returns TRUE.

"><meta property="og:image" content="https://galah.ala.org.au/R/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">galah</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/quick_start_guide.html">Quick start guide</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Get started</h6></li>
    <li><a class="dropdown-item" href="../articles/choosing_an_atlas.html">Choosing an atlas</a></li>
    <li><a class="dropdown-item" href="../articles/look_up_information.html">Look up information</a></li>
    <li><a class="dropdown-item" href="../articles/narrow_your_results.html">Narrow your results</a></li>
    <li><a class="dropdown-item" href="../articles/download_data.html">Download data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced</h6></li>
    <li><a class="dropdown-item" href="../articles/object_oriented_programming.html">Object-oriented programming</a></li>
    <li><a class="dropdown-item" href="../articles/download-data-reproducibly.html">Reproduciblility</a></li>
    <li><a class="dropdown-item" href="../articles/taxonomic_filtering.html">Taxonomic filtering</a></li>
    <li><a class="dropdown-item" href="../articles/spatial_filtering.html">Spatial filtering</a></li>
    <li><a class="dropdown-item" href="../articles/temporal_filtering.html">Temporal filtering</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AtlasOfLivingAustralia/galah-R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Keep or drop columns using their names</h1>
      <small class="dont-index">Source: <a href="https://github.com/AtlasOfLivingAustralia/galah-R/blob/main/R/galah_select.R" class="external-link"><code>R/galah_select.R</code></a></small>
      <div class="d-none name"><code>select.data_request.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Select (and optionally rename) variables in a data frame, using
a concise mini-language that makes it easy to refer to variables based on
their name. Note that unlike calling <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> on a local tibble, this
implementation is only evaluated at the
<code><a href="collapse.data_request.html">collapse()</a></code> stage, meaning any errors
or messages will be triggered at the end of the pipe.</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> supports <code>dplyr</code> <strong>selection helpers</strong>, including:</p><ul><li><p><code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></code>: Matches all variables.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">last_col</a></code>: Select last variable, possibly with an
offset.</p></li>
</ul><p>Other helpers select variables by matching patterns in their names:</p><ul><li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></code>: Starts with a prefix.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">ends_with</a></code>: Ends with a suffix.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></code>: Contains a literal string.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></code>: Matches a regular expression.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">num_range</a></code>: Matches a numerical range like x01,
x02, x03.</p></li>
</ul><p>Or from variables stored in a character vector:</p><ul><li><p><code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of</a></code>: Matches variable names in a character
vector. All names must be present, otherwise an out-of-bounds error is
thrown.</p></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">any_of</a></code>: Same as <code>all_of()</code>, except that no error
is thrown for names that don't exist.</p></li>
</ul><p>Or using a predicate function:</p><ul><li><p><code><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></code>: Applies a function to all variables and selects those for which the function returns <code>TRUE</code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'data_request'</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, <span class="va">group</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">galah_select</span><span class="op">(</span><span class="va">...</span>, <span class="va">group</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>An object of class <code>data_request</code>, created using <code><a href="galah_call.html">galah_call()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Zero or more individual column names to include.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p><code>string</code>: (optional) name of one or more column groups to
include. Valid options are <code>"basic"</code>, <code>"event"</code> <code>"taxonomy"</code>, <code>"media"</code> and
<code>"assertions"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble
specifying the name and type of each column to include in the
call to <code><a href="atlas_.html">atlas_counts()</a></code> or <code><a href="atlas_.html">atlas_occurrences()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>GBIF nodes store content in hundreds of different fields, and users often
require thousands or millions of records at a time. To reduce time taken to
download data, and limit complexity of the resulting <code>tibble</code>, it is sensible
to restrict the fields returned by occurrence queries. The full list of
available fields can be viewed with <code>show_all(fields)</code>. Note that <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code>
and <code>galah_select()</code> are supported for all atlases that allow downloads, with
the exception of GBIF, for which all columns are returned.</p>
<p>Calling the argument <code>group = "basic"</code> returns the following columns:</p><ul><li><p><code>decimalLatitude</code></p></li>
<li><p><code>decimalLongitude</code></p></li>
<li><p><code>eventDate</code></p></li>
<li><p><code>scientificName</code></p></li>
<li><p><code>taxonConceptID</code></p></li>
<li><p><code>recordID</code></p></li>
<li><p><code>dataResourceName</code></p></li>
<li><p><code>occurrenceStatus</code></p></li>
</ul><p>Using <code>group = "event"</code> returns the following columns:</p><ul><li><p><code>eventRemarks</code></p></li>
<li><p><code>eventTime</code></p></li>
<li><p><code>eventID</code></p></li>
<li><p><code>eventDate</code></p></li>
<li><p><code>samplingEffort</code></p></li>
<li><p><code>samplingProtocol</code></p></li>
</ul><p>Using <code>group = "media"</code> returns the following columns:</p><ul><li><p><code>multimedia</code></p></li>
<li><p><code>multimediaLicence</code></p></li>
<li><p><code>images</code></p></li>
<li><p><code>videos</code></p></li>
<li><p><code>sounds</code></p></li>
</ul><p>Using <code>group = "taxonomy"</code> returns higher taxonomic information for a given
query. It is the only <code>group</code> that is accepted by <code><a href="atlas_.html">atlas_species()</a></code> as well
as <code><a href="atlas_.html">atlas_occurrences()</a></code>.</p>
<p>Using <code>group = "assertions"</code> returns all quality assertion-related
columns. The list of assertions is shown by <code><a href="show_all.html">show_all_assertions()</a></code>.</p>
<p>For <code><a href="atlas_.html">atlas_occurrences()</a></code>, arguments passed to <code>...</code> should be valid field
names, which you can check using <code>show_all(fields)</code>. For <code><a href="atlas_.html">atlas_species()</a></code>,
it should be one or more of:</p><ul><li><p><code>counts</code> to include counts of occurrences per species.</p></li>
<li><p><code>synonyms</code> to include any synonymous names.</p></li>
<li><p><code>lists</code> to include authoritative lists that each species is included on.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="filter.data_request.html">filter()</a></code>,
<code><a href="geolocate.html">st_crop()</a></code> and
<code><a href="identify.data_request.html">identify()</a></code> for other ways to restrict
the information returned; <code>show_all(fields)</code> to list available fields.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Download occurrence records of *Perameles*, </span></span></span>
<span class="r-in"><span><span class="co"># Only return scientificName and eventDate columns</span></span></span>
<span class="r-in"><span><span class="fu"><a href="galah_config.html">galah_config</a></span><span class="op">(</span>email <span class="op">=</span> <span class="st">"your-email@email.com"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="galah_call.html">galah_call</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/identify.html" class="external-link">identify</a></span><span class="op">(</span><span class="st">"perameles"</span><span class="op">)</span><span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">scientificName</span>, <span class="va">eventDate</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only return the "basic" group of columns and the basisOfRecord column</span></span></span>
<span class="r-in"><span><span class="fu"><a href="galah_call.html">galah_call</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/graphics/identify.html" class="external-link">identify</a></span><span class="op">(</span><span class="st">"perameles"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">basisOfRecord</span>, group <span class="op">=</span> <span class="st">"basic"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  </span></span>
<span class="r-in"><span><span class="co"># When used in a pipe, `galah_select()` and `select()` are synonymous.</span></span></span>
<span class="r-in"><span><span class="co"># Hence the previous example can be rewritten as:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="galah_call.html">galah_call</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="identify.data_request.html">galah_identify</a></span><span class="op">(</span><span class="st">"perameles"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">galah_select</span><span class="op">(</span><span class="va">basisOfRecord</span>, group <span class="op">=</span> <span class="st">"basic"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Westgate, Dax Kellie, Matilda Stevenson, Peggy Newman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

