<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Spatial filtering • galah</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Spatial filtering">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">galah</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/quick_start_guide.html">Quick start guide</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Get started</h6></li>
    <li><a class="dropdown-item" href="../articles/choosing_an_atlas.html">Choosing an atlas</a></li>
    <li><a class="dropdown-item" href="../articles/look_up_information.html">Look up information</a></li>
    <li><a class="dropdown-item" href="../articles/narrow_your_results.html">Narrow your results</a></li>
    <li><a class="dropdown-item" href="../articles/download_data.html">Download data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced</h6></li>
    <li><a class="dropdown-item" href="../articles/object_oriented_programming.html">Object-oriented programming</a></li>
    <li><a class="dropdown-item" href="../articles/download-data-reproducibly.html">Reproduciblility</a></li>
    <li><a class="dropdown-item" href="../articles/taxonomic_filtering.html">Taxonomic filtering</a></li>
    <li><a class="dropdown-item" href="../articles/spatial_filtering.html">Spatial filtering</a></li>
    <li><a class="dropdown-item" href="../articles/temporal_filtering.html">Temporal filtering</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AtlasOfLivingAustralia/galah-R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Spatial filtering</h1>
                        <h4 data-toc-skip class="author">Callum Waite
&amp; Shandiya Balasubramaniam</h4>
            
            <h4 data-toc-skip class="date">2023-10-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/AtlasOfLivingAustralia/galah-R/blob/v2.1.2/vignettes/spatial_filtering.Rmd" class="external-link"><code>vignettes/spatial_filtering.Rmd</code></a></small>
      <div class="d-none name"><code>spatial_filtering.Rmd</code></div>
    </div>

    
    
<p>Biodiversity queries to the ALA usually require some spatial
filtering. Let’s see how spatial data are stored in the ALA and a few
different methods to spatially filter data with galah and other
packages.</p>
<p>Most records in the ALA contain location data in the form of two key
fields: <code>decimalLatitude</code> and <code>decimalLongitude</code>.
As expected, these fields are the decimal coordinates of each
occurrence, with south and west values denoted by negatives. While there
may be some uncertainty in these values (see field
<code>coordinateUncertaintyInMeters</code>), they are generally very
accurate.</p>
<p>While these are very important and useful fields, very rarely will we
encounter situations that require queries directly calling
<code>decimalLatitude</code> and <code>decimalLongitude</code>. Instead,
the ALA and galah have a number of features that make spatial queries
simpler.</p>
<div class="section level3">
<h3 id="contextual-and-spatial-layers">Contextual and spatial layers<a class="anchor" aria-label="anchor" href="#contextual-and-spatial-layers"></a>
</h3>
<p>Often we want to filter results down to some commonly defined spatial
regions, such as states, LGAs or IBRA/IMCRA regions. The ALA contains a
large range (&gt;100) of contextual and spatial layers, in-built as
searchable and queriable fields. They are denoted by names beginning
with <code>"cl"</code>, followed by an identifying number that may be up
to 6 digits long. These fields are each based on shapefiles, and contain
the names of the regions in these layers that each record lies in.</p>
<p>We strongly recommend using <code><a href="../reference/search_all.html">search_fields()</a></code> to check
whether a contextual layer already exists in the ALA that matches what
you require before proceeding with other methods of spatial filtering.
These fields are all able to be queried with <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code>and so
they are generally easier to use.</p>
<p>Suppose we are interested in querying records of the Red-Necked
Avocet (<em>Recurvirostra novaehollandiae</em>) in the Coorong wetlands
in South Australia. We can search the ALA fields for wetlands.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://galah.ala.org.au/R/">galah</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com" class="external-link">gt</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/galah_config.html">galah_config</a></span><span class="op">(</span>email <span class="op">=</span> <span class="st">"your_email_here"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_all.html">search_fields</a></span><span class="op">(</span><span class="st">"wetlands"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 2 × 3</span></span>
<span><span class="co">##   id      description                       type  </span></span>
<span><span class="co">##   &lt;chr&gt;   &lt;chr&gt;                             &lt;chr&gt; </span></span>
<span><span class="co">## 1 cl901   Directory of Important Wetlands   fields</span></span>
<span><span class="co">## 2 cl11192 Ramsar_Wetlands_of_AustraliaWGS84 fields</span></span></code></pre>
<p>Our search identifies that layer <code>cl901</code> seems to match
what we are looking for. We can then either view all possible values in
the field with <code><a href="../reference/show_values.html">show_values()</a></code>, or search again for our
particular field.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_all.html">search_fields</a></span><span class="op">(</span><span class="st">"cl901"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/show_values.html">search_values</a></span><span class="op">(</span><span class="st">"coorong"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## • Showing values for 'cl901'.</span></span></code></pre>
<pre><code><span><span class="co">## # A tibble: 1 × 1</span></span>
<span><span class="co">##   cl901                                      </span></span>
<span><span class="co">##   &lt;chr&gt;                                      </span></span>
<span><span class="co">## 1 The Coorong, Lake Alexandrina &amp; Lake Albert</span></span></code></pre>
<p>We can filter all occurrences for exact matches with this value,
<code>"Lake Eyre"</code>. Our <code>galah</code> query can be built as
follows:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/galah_call.html">galah_call</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/identify.html" class="external-link">identify</a></span><span class="op">(</span><span class="st">"Recurvirostra novaehollandiae"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cl901</span> <span class="op">==</span> <span class="st">"The Coorong, Lake Alexandrina &amp; Lake Albert"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Retrying in 1 seconds.</span></span>
<span><span class="co">## Retrying in 2 seconds.</span></span>
<span><span class="co">## Retrying in 4 seconds.</span></span></code></pre>
<div id="rmmelfqsxk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rmmelfqsxk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rmmelfqsxk thead, #rmmelfqsxk tbody, #rmmelfqsxk tfoot, #rmmelfqsxk tr, #rmmelfqsxk td, #rmmelfqsxk th {
  border-style: none;
}

#rmmelfqsxk p {
  margin: 0;
  padding: 0;
}

#rmmelfqsxk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rmmelfqsxk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rmmelfqsxk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rmmelfqsxk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rmmelfqsxk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rmmelfqsxk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rmmelfqsxk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rmmelfqsxk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rmmelfqsxk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rmmelfqsxk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rmmelfqsxk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rmmelfqsxk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rmmelfqsxk .gt_spanner_row {
  border-bottom-style: hidden;
}

#rmmelfqsxk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rmmelfqsxk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rmmelfqsxk .gt_from_md > :first-child {
  margin-top: 0;
}

#rmmelfqsxk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rmmelfqsxk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rmmelfqsxk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rmmelfqsxk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rmmelfqsxk .gt_row_group_first td {
  border-top-width: 2px;
}

#rmmelfqsxk .gt_row_group_first th {
  border-top-width: 2px;
}

#rmmelfqsxk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rmmelfqsxk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rmmelfqsxk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rmmelfqsxk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rmmelfqsxk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rmmelfqsxk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rmmelfqsxk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rmmelfqsxk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rmmelfqsxk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rmmelfqsxk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rmmelfqsxk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rmmelfqsxk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rmmelfqsxk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rmmelfqsxk .gt_left {
  text-align: left;
}

#rmmelfqsxk .gt_center {
  text-align: center;
}

#rmmelfqsxk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rmmelfqsxk .gt_font_normal {
  font-weight: normal;
}

#rmmelfqsxk .gt_font_bold {
  font-weight: bold;
}

#rmmelfqsxk .gt_font_italic {
  font-style: italic;
}

#rmmelfqsxk .gt_super {
  font-size: 65%;
}

#rmmelfqsxk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rmmelfqsxk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rmmelfqsxk .gt_indent_1 {
  text-indent: 5px;
}

#rmmelfqsxk .gt_indent_2 {
  text-indent: 10px;
}

#rmmelfqsxk .gt_indent_3 {
  text-indent: 15px;
}

#rmmelfqsxk .gt_indent_4 {
  text-indent: 20px;
}

#rmmelfqsxk .gt_indent_5 {
  text-indent: 25px;
}

#rmmelfqsxk .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rmmelfqsxk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="recordID">recordID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="scientificName">scientificName</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="taxonConceptID">taxonConceptID</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="decimalLatitude">decimalLatitude</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="decimalLongitude">decimalLongitude</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="eventDate">eventDate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="occurrenceStatus">occurrenceStatus</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="dataResourceName">dataResourceName</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="recordID" class="gt_row gt_left">00630f58-ee78-4f69-ba39-718b0a1c3356</td>
<td headers="scientificName" class="gt_row gt_left">Recurvirostra novaehollandiae</td>
<td headers="taxonConceptID" class="gt_row gt_left">https://biodiversity.org.au/afd/taxa/c69e7308-527a-429d-a80d-143bd20b5100</td>
<td headers="decimalLatitude" class="gt_row gt_right">-35.59293</td>
<td headers="decimalLongitude" class="gt_row gt_right">139.0218</td>
<td headers="eventDate" class="gt_row gt_right">2008-11-18</td>
<td headers="occurrenceStatus" class="gt_row gt_left">PRESENT</td>
<td headers="dataResourceName" class="gt_row gt_left">SA Fauna</td>
</tr>
<tr>
<td headers="recordID" class="gt_row gt_left">00705077-abc2-4f28-aedd-11a479ec2d82</td>
<td headers="scientificName" class="gt_row gt_left">Recurvirostra novaehollandiae</td>
<td headers="taxonConceptID" class="gt_row gt_left">https://biodiversity.org.au/afd/taxa/c69e7308-527a-429d-a80d-143bd20b5100</td>
<td headers="decimalLatitude" class="gt_row gt_right">-35.52833</td>
<td headers="decimalLongitude" class="gt_row gt_right">138.8089</td>
<td headers="eventDate" class="gt_row gt_right">2016-03-06</td>
<td headers="occurrenceStatus" class="gt_row gt_left">PRESENT</td>
<td headers="dataResourceName" class="gt_row gt_left">BirdLife Australia, Birdata</td>
</tr>
<tr>
<td headers="recordID" class="gt_row gt_left">0071444e-ddf2-45dc-9a10-c6399686e306</td>
<td headers="scientificName" class="gt_row gt_left">Recurvirostra novaehollandiae</td>
<td headers="taxonConceptID" class="gt_row gt_left">https://biodiversity.org.au/afd/taxa/c69e7308-527a-429d-a80d-143bd20b5100</td>
<td headers="decimalLatitude" class="gt_row gt_right">-35.57719</td>
<td headers="decimalLongitude" class="gt_row gt_right">138.9923</td>
<td headers="eventDate" class="gt_row gt_right">2008-01-01</td>
<td headers="occurrenceStatus" class="gt_row gt_left">PRESENT</td>
<td headers="dataResourceName" class="gt_row gt_left">SA Fauna</td>
</tr>
<tr>
<td headers="recordID" class="gt_row gt_left">008a2e6c-26b4-4f4e-a428-b0330db53466</td>
<td headers="scientificName" class="gt_row gt_left">Recurvirostra novaehollandiae</td>
<td headers="taxonConceptID" class="gt_row gt_left">https://biodiversity.org.au/afd/taxa/c69e7308-527a-429d-a80d-143bd20b5100</td>
<td headers="decimalLatitude" class="gt_row gt_right">-35.52831</td>
<td headers="decimalLongitude" class="gt_row gt_right">138.8280</td>
<td headers="eventDate" class="gt_row gt_right">2017-11-19 17:15:00</td>
<td headers="occurrenceStatus" class="gt_row gt_left">PRESENT</td>
<td headers="dataResourceName" class="gt_row gt_left">eBird Australia</td>
</tr>
<tr>
<td headers="recordID" class="gt_row gt_left">00b11f13-0100-4471-b18b-7e9736ddeeaf</td>
<td headers="scientificName" class="gt_row gt_left">Recurvirostra novaehollandiae</td>
<td headers="taxonConceptID" class="gt_row gt_left">https://biodiversity.org.au/afd/taxa/c69e7308-527a-429d-a80d-143bd20b5100</td>
<td headers="decimalLatitude" class="gt_row gt_right">-36.18001</td>
<td headers="decimalLongitude" class="gt_row gt_right">139.6589</td>
<td headers="eventDate" class="gt_row gt_right">2017-08-05 13:25:00</td>
<td headers="occurrenceStatus" class="gt_row gt_left">PRESENT</td>
<td headers="dataResourceName" class="gt_row gt_left">eBird Australia</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="filtering-data-to-a-polygon">Filtering data to a polygon<a class="anchor" aria-label="anchor" href="#filtering-data-to-a-polygon"></a>
</h3>
<p>While server-side spatial information is useful, there are likely to
be cases where the shapefile or region you wish to query will not be
pre-loaded as a contextual layer in the ALA. In this case, shapefiles
can be introduced to the filtering process using the {sf} package and
the <code><a href="../reference/geolocate.html">geolocate()</a></code> function. Shapefiles can be provided as an
<code>sf</code> object, whether that is by importing them with
<code><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">sf::st_read()</a></code> or taking a <code>POLYGON</code> or
<code>MULTIPOLYGON</code> character string and transforming them with
<code><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">sf::st_as_sfc()</a></code>.</p>
<p>For instance, we might interested in species occurrences in King
George Square, Brisbane. We can take the <code>MULTIPOLYGON</code>
object for the square (as sourced from the <a href="https://data.brisbane.qld.gov.au/pages/home/" class="external-link">Brisbane City
Council</a>) and transform it into <code>sfc</code> and then
<code>sf</code> objects.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">king_george_sq</span> <span class="op">&lt;-</span> <span class="st">"MULTIPOLYGON(((153.0243 -27.46886, 153.0242 -27.46896, 153.0236 -27.46837, 153.0239 -27.46814, 153.0239 -27.46813, 153.0242 -27.46789, 153.0244 -27.46805, 153.0245 -27.46821, 153.0246 -27.46828, 153.0247 -27.46835, 153.0248 -27.46848, 153.0246 -27.4686, 153.0246 -27.46862, 153.0245 -27.46871, 153.0243 -27.46886)))"</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">st_as_sfc</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>We can provide this <code>MULTIPOLYGON</code> in our filter as the
argument of <code><a href="../reference/geolocate.html">geolocate()</a></code> to assess which species have been
recorded in King George Square.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/galah_call.html">galah_call</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/geolocate.html">geolocate</a></span><span class="op">(</span><span class="va">king_george_sq</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">decimalLatitude</span>, </span>
<span>         <span class="va">decimalLongitude</span>, </span>
<span>         <span class="va">eventDate</span>, </span>
<span>         <span class="va">scientificName</span>, </span>
<span>         <span class="va">vernacularName</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="koxekvwcgg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#koxekvwcgg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#koxekvwcgg thead, #koxekvwcgg tbody, #koxekvwcgg tfoot, #koxekvwcgg tr, #koxekvwcgg td, #koxekvwcgg th {
  border-style: none;
}

#koxekvwcgg p {
  margin: 0;
  padding: 0;
}

#koxekvwcgg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#koxekvwcgg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#koxekvwcgg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#koxekvwcgg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#koxekvwcgg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#koxekvwcgg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#koxekvwcgg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#koxekvwcgg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#koxekvwcgg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#koxekvwcgg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#koxekvwcgg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#koxekvwcgg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#koxekvwcgg .gt_spanner_row {
  border-bottom-style: hidden;
}

#koxekvwcgg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#koxekvwcgg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#koxekvwcgg .gt_from_md > :first-child {
  margin-top: 0;
}

#koxekvwcgg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#koxekvwcgg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#koxekvwcgg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#koxekvwcgg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#koxekvwcgg .gt_row_group_first td {
  border-top-width: 2px;
}

#koxekvwcgg .gt_row_group_first th {
  border-top-width: 2px;
}

#koxekvwcgg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#koxekvwcgg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#koxekvwcgg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#koxekvwcgg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#koxekvwcgg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#koxekvwcgg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#koxekvwcgg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#koxekvwcgg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#koxekvwcgg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#koxekvwcgg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#koxekvwcgg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#koxekvwcgg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#koxekvwcgg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#koxekvwcgg .gt_left {
  text-align: left;
}

#koxekvwcgg .gt_center {
  text-align: center;
}

#koxekvwcgg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#koxekvwcgg .gt_font_normal {
  font-weight: normal;
}

#koxekvwcgg .gt_font_bold {
  font-weight: bold;
}

#koxekvwcgg .gt_font_italic {
  font-style: italic;
}

#koxekvwcgg .gt_super {
  font-size: 65%;
}

#koxekvwcgg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#koxekvwcgg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#koxekvwcgg .gt_indent_1 {
  text-indent: 5px;
}

#koxekvwcgg .gt_indent_2 {
  text-indent: 10px;
}

#koxekvwcgg .gt_indent_3 {
  text-indent: 15px;
}

#koxekvwcgg .gt_indent_4 {
  text-indent: 20px;
}

#koxekvwcgg .gt_indent_5 {
  text-indent: 25px;
}

#koxekvwcgg .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#koxekvwcgg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="decimalLatitude">decimalLatitude</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="decimalLongitude">decimalLongitude</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="eventDate">eventDate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="scientificName">scientificName</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="vernacularName">vernacularName</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46862</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0243</td>
<td headers="eventDate" class="gt_row gt_right">2006-03-30 09:32:00</td>
<td headers="scientificName" class="gt_row gt_left">Threskiornis moluccus</td>
<td headers="vernacularName" class="gt_row gt_left">Australian White Ibis</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46861</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0244</td>
<td headers="eventDate" class="gt_row gt_right">2023-12-02 09:12:02</td>
<td headers="scientificName" class="gt_row gt_left">Cosmophasis baehrae</td>
<td headers="vernacularName" class="gt_row gt_left">NA</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46855</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0239</td>
<td headers="eventDate" class="gt_row gt_right">2024-02-03 20:45:00</td>
<td headers="scientificName" class="gt_row gt_left">Mediastinia</td>
<td headers="vernacularName" class="gt_row gt_left">NA</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46851</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0238</td>
<td headers="eventDate" class="gt_row gt_right">2023-04-08 17:49:00</td>
<td headers="scientificName" class="gt_row gt_left">Entomyzon cyanotis</td>
<td headers="vernacularName" class="gt_row gt_left">Blue-faced Honeyeater</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46842</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0241</td>
<td headers="eventDate" class="gt_row gt_right">2022-08-30 11:29:00</td>
<td headers="scientificName" class="gt_row gt_left">Threskiornis moluccus</td>
<td headers="vernacularName" class="gt_row gt_left">Australian White Ibis</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46836</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0241</td>
<td headers="eventDate" class="gt_row gt_right">2024-08-28 10:31:54</td>
<td headers="scientificName" class="gt_row gt_left">Vitellus</td>
<td headers="vernacularName" class="gt_row gt_left">NA</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46833</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0241</td>
<td headers="eventDate" class="gt_row gt_right">2022-07-24 14:43:00</td>
<td headers="scientificName" class="gt_row gt_left">Threskiornis moluccus</td>
<td headers="vernacularName" class="gt_row gt_left">Australian White Ibis</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46831</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0241</td>
<td headers="eventDate" class="gt_row gt_right">2024-10-13 14:34:00</td>
<td headers="scientificName" class="gt_row gt_left">Threskiornis moluccus</td>
<td headers="vernacularName" class="gt_row gt_left">Australian White Ibis</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46830</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0240</td>
<td headers="eventDate" class="gt_row gt_right">2024-10-13 14:35:00</td>
<td headers="scientificName" class="gt_row gt_left">Gymnorhina tibicen</td>
<td headers="vernacularName" class="gt_row gt_left">Australian Magpie</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46817</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0240</td>
<td headers="eventDate" class="gt_row gt_right">2024-07-23 10:00:53</td>
<td headers="scientificName" class="gt_row gt_left">Threskiornis moluccus</td>
<td headers="vernacularName" class="gt_row gt_left">Australian White Ibis</td>
</tr>
</tbody>
</table>
</div>
<p>There is a second argument of <code><a href="../reference/geolocate.html">geolocate()</a></code> called
<code>type</code>, which defaults to value <code>"polygon"</code>. By
setting the <code>type</code> argument to <code>"bbox"</code>, the
provided <code>POLYGON</code> or <code>MULTIPOLYGON</code> will be
converted into the smallest bounding box (rectangle) that contains the
<code>POLYGON</code>. In this case, records will be included that may
not exactly lie inside the provided shape.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/galah_call.html">galah_call</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/geolocate.html">geolocate</a></span><span class="op">(</span><span class="va">king_george_sq</span>, type <span class="op">=</span> <span class="st">"bbox"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">decimalLatitude</span>, </span>
<span>         <span class="va">decimalLongitude</span>, </span>
<span>         <span class="va">eventDate</span>, </span>
<span>         <span class="va">scientificName</span>, </span>
<span>         <span class="va">vernacularName</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gt</span><span class="fu">::</span><span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Data returned for bounding box:</span></span>
<span><span class="co">## xmin = 153.0236 xmax = 153.0248 ymin = -27.46896 ymax = -27.46789</span></span></code></pre>
<div id="whxugclisi" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#whxugclisi table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#whxugclisi thead, #whxugclisi tbody, #whxugclisi tfoot, #whxugclisi tr, #whxugclisi td, #whxugclisi th {
  border-style: none;
}

#whxugclisi p {
  margin: 0;
  padding: 0;
}

#whxugclisi .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#whxugclisi .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#whxugclisi .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#whxugclisi .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#whxugclisi .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#whxugclisi .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#whxugclisi .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#whxugclisi .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#whxugclisi .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#whxugclisi .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#whxugclisi .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#whxugclisi .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#whxugclisi .gt_spanner_row {
  border-bottom-style: hidden;
}

#whxugclisi .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#whxugclisi .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#whxugclisi .gt_from_md > :first-child {
  margin-top: 0;
}

#whxugclisi .gt_from_md > :last-child {
  margin-bottom: 0;
}

#whxugclisi .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#whxugclisi .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#whxugclisi .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#whxugclisi .gt_row_group_first td {
  border-top-width: 2px;
}

#whxugclisi .gt_row_group_first th {
  border-top-width: 2px;
}

#whxugclisi .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#whxugclisi .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#whxugclisi .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#whxugclisi .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#whxugclisi .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#whxugclisi .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#whxugclisi .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#whxugclisi .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#whxugclisi .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#whxugclisi .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#whxugclisi .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#whxugclisi .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#whxugclisi .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#whxugclisi .gt_left {
  text-align: left;
}

#whxugclisi .gt_center {
  text-align: center;
}

#whxugclisi .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#whxugclisi .gt_font_normal {
  font-weight: normal;
}

#whxugclisi .gt_font_bold {
  font-weight: bold;
}

#whxugclisi .gt_font_italic {
  font-style: italic;
}

#whxugclisi .gt_super {
  font-size: 65%;
}

#whxugclisi .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#whxugclisi .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#whxugclisi .gt_indent_1 {
  text-indent: 5px;
}

#whxugclisi .gt_indent_2 {
  text-indent: 10px;
}

#whxugclisi .gt_indent_3 {
  text-indent: 15px;
}

#whxugclisi .gt_indent_4 {
  text-indent: 20px;
}

#whxugclisi .gt_indent_5 {
  text-indent: 25px;
}

#whxugclisi .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#whxugclisi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="decimalLatitude">decimalLatitude</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="decimalLongitude">decimalLongitude</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="eventDate">eventDate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="scientificName">scientificName</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="vernacularName">vernacularName</th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46889</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0244</td>
<td headers="eventDate" class="gt_row gt_right">2015-10-09</td>
<td headers="scientificName" class="gt_row gt_left">Burhinus (Burhinus) grallarius</td>
<td headers="vernacularName" class="gt_row gt_left">Bush Stone-curlew</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46882</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0236</td>
<td headers="eventDate" class="gt_row gt_right">2019-04-21 14:40:00</td>
<td headers="scientificName" class="gt_row gt_left">Threskiornis moluccus</td>
<td headers="vernacularName" class="gt_row gt_left">Australian White Ibis</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46882</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0236</td>
<td headers="eventDate" class="gt_row gt_right">2005-08-28 12:18:00</td>
<td headers="scientificName" class="gt_row gt_left">Threskiornis moluccus</td>
<td headers="vernacularName" class="gt_row gt_left">Australian White Ibis</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46868</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0238</td>
<td headers="eventDate" class="gt_row gt_right">2024-07-15 15:00:18</td>
<td headers="scientificName" class="gt_row gt_left">Pseudanapaea denotata</td>
<td headers="vernacularName" class="gt_row gt_left">NA</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46868</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0238</td>
<td headers="eventDate" class="gt_row gt_right">2024-01-13 15:07:42</td>
<td headers="scientificName" class="gt_row gt_left">Tenodera australasiae</td>
<td headers="vernacularName" class="gt_row gt_left">Purplewinged Mantid</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46868</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0238</td>
<td headers="eventDate" class="gt_row gt_right">2024-01-13 15:04:53</td>
<td headers="scientificName" class="gt_row gt_left">Pristhesancus plagipennis</td>
<td headers="vernacularName" class="gt_row gt_left">Bee-killer</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46868</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0238</td>
<td headers="eventDate" class="gt_row gt_right">2024-01-13 15:06:26</td>
<td headers="scientificName" class="gt_row gt_left">Toxorhynchites (Toxorhynchites) speciosus</td>
<td headers="vernacularName" class="gt_row gt_left">NA</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46868</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0238</td>
<td headers="eventDate" class="gt_row gt_right">2024-01-13 12:20:00</td>
<td headers="scientificName" class="gt_row gt_left">Xixuthrus</td>
<td headers="vernacularName" class="gt_row gt_left">NA</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46868</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0238</td>
<td headers="eventDate" class="gt_row gt_right">2024-07-15 12:12:27</td>
<td headers="scientificName" class="gt_row gt_left">Columba (Columba) livia</td>
<td headers="vernacularName" class="gt_row gt_left">Rock Dove</td>
</tr>
<tr>
<td headers="decimalLatitude" class="gt_row gt_right">-27.46868</td>
<td headers="decimalLongitude" class="gt_row gt_right">153.0238</td>
<td headers="eventDate" class="gt_row gt_right">2024-01-13 15:07:42</td>
<td headers="scientificName" class="gt_row gt_left">Lyramorpha (Lyramorpha) rosea</td>
<td headers="vernacularName" class="gt_row gt_left">Litchi Stink Bug</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="large-shapefiles">Large shapefiles<a class="anchor" aria-label="anchor" href="#large-shapefiles"></a>
</h4>
<p>The <code>type</code> argument with option <code>"bbox"</code> is
provided because <code>sf</code> objects with &gt;500 vertices will not
be accepted by the ALA. In the event you have a large shapefile, using
<code>type = "bbox"</code> will at least enable an initial reduction of
the data that is downloaded, before finer filtering to the actual
shapefile will obtain the desired set of occurrences. Alternatively, one
can also perform the <code>"bbox"</code> reduction before passing the
shape to <code><a href="../reference/geolocate.html">geolocate()</a></code> by using
<code><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">sf::st_bbox()</a></code>.</p>
<p>A common situation for this to occur is when a shapefile with
multiple shapes is provided, where we are interested in grouping our
results by each shape. Here is a mock workflow using a subset of a
shapefile of all 2,184 Brisbane parks.</p>
<p>Let’s say we are interested in knowing which parks in the Brisbane
postcode 4075 have the most occurrences of the Scaly-Breasted Lorikeet
(<em>Trichoglossus chlorolepidotus</em>) since 2020. We can download the
entire shapefile from the link above, and perform our filtering and
summarising as follows:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">brisbane_parks</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="st">"path/to/Park___Locations.shp"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/valid.html" class="external-link">st_make_valid</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">POST_CODE</span> <span class="op">==</span> <span class="fl">4075</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert shapefile to a bounding box</span></span>
<span><span class="va">brisbane_parks_bbox</span> <span class="op">&lt;-</span> <span class="va">brisbane_parks</span> <span class="op">|&gt;</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find all occurrences of Trichoglossus chlorolepidotus in the bounding box in 2022</span></span>
<span><span class="va">lorikeet_brisbane</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/galah_call.html">galah_call</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">scientificName</span> <span class="op">==</span> <span class="st">"Trichoglossus chlorolepidotus"</span>, </span>
<span>         <span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">2020</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/geolocate.html">geolocate</a></span><span class="op">(</span><span class="va">brisbane_parks_bbox</span>, type <span class="op">=</span> <span class="st">"bbox"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Data returned for bounding box:</span></span>
<span><span class="co">## xmin = 152.96331 xmax = 152.99668 ymin = -27.57737 ymax = -27.51606</span></span>
<span><span class="co">## Retrying in 1 seconds.</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter records down to only those in the shapefile polygons</span></span>
<span><span class="va">lorikeet_brisbane</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Create a point geometry based on the occurrence coordinates</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"decimalLongitude"</span>, <span class="st">"decimalLatitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">brisbane_parks</span><span class="op">)</span>, remove <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># identify which park each occurrence sits in with st_intersects()</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>intersection <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_pred.html" class="external-link">st_intersects</a></span><span class="op">(</span><span class="va">geometry</span>, <span class="va">brisbane_parks</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>         park <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">intersection</span><span class="op">)</span>, <span class="cn">NA</span>, <span class="va">brisbane_parks</span><span class="op">$</span><span class="va">PARK_NAME</span><span class="op">[</span><span class="va">intersection</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Filter out occurrences that did not occur in a park</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">park</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Drop the geometry column</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># Summarise the top 10 parks for lorikeet sightings in 2022</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">park</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>counts <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="../reference/tidyverse_functions.html">desc</a></span><span class="op">(</span><span class="va">counts</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 10 × 2</span></span>
<span><span class="co">##    park                           counts</span></span>
<span><span class="co">##    &lt;chr&gt;                           &lt;int&gt;</span></span>
<span><span class="co">##  1 NYUNDARE-BA PARK                  552</span></span>
<span><span class="co">##  2 SHERWOOD ARBORETUM                472</span></span>
<span><span class="co">##  3 FAULKNER PARK                      64</span></span>
<span><span class="co">##  4 FORT ROAD BUSHLAND                 46</span></span>
<span><span class="co">##  5 STRICKLAND TERRACE PARK            44</span></span>
<span><span class="co">##  6 BENARRAWA RESERVE                  34</span></span>
<span><span class="co">##  7 GRACEVILLE RIVERSIDE PARKLANDS     32</span></span>
<span><span class="co">##  8 NOSWORTHY PARK                     17</span></span>
<span><span class="co">##  9 HORACE WINDOW RESERVE              14</span></span>
<span><span class="co">## 10 GRACEVILLE AVENUE PARK              7</span></span></code></pre>
<p>Some shapefiles cover large geographic areas with the caveat that
even the bounding box doesn’t restrict the number of records to a value
that can be downloaded easily. In this case, we recommend more nuances
and detailed methods that can be performed using looping techniques. One
of our ALA Labs blog posts, <a href="https://labs.ala.org.au/posts/2021-04-14_hex-maps-for-species-occurrence-data/" class="external-link">Hex
maps for species occurrence data</a>, has been written detailing how to
approach larger problems such as this.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Westgate, Dax Kellie, Matilda Stevenson, Peggy Newman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
